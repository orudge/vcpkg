diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6451fcf..ced64dc 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -66,8 +66,7 @@ set(DFA_XTRA "" CACHE FILEPATH "File containing extra configuration settings")
 if(PNG_HARDWARE_OPTIMIZATIONS)
 
 # set definitions and sources for arm
-if(CMAKE_SYSTEM_PROCESSOR MATCHES "^arm" OR
-  CMAKE_SYSTEM_PROCESSOR MATCHES "^aarch64")
+if(CMAKE_OSX_ARCHITECTURES MATCHES "^arm64")
   set(PNG_ARM_NEON_POSSIBLE_VALUES check on off)
   set(PNG_ARM_NEON "check" CACHE STRING "Enable ARM NEON optimizations:
      check: (default) use internal checking code;
@@ -121,8 +120,8 @@ if(CMAKE_SYSTEM_PROCESSOR MATCHES "^powerpc*" OR
 endif()
 
 # set definitions and sources for intel
-if(CMAKE_SYSTEM_PROCESSOR MATCHES "^i?86" OR
-   CMAKE_SYSTEM_PROCESSOR MATCHES "^x86_64*")
+if(CMAKE_OSX_ARCHITECTURES MATCHES "^i?86" OR
+   CMAKE_OSX_ARCHITECTURES MATCHES "^x86_64*")
   set(PNG_INTEL_SSE_POSSIBLE_VALUES on off)
   set(PNG_INTEL_SSE "on" CACHE STRING "Enable INTEL_SSE optimizations:
      off: disable the optimizations")
@@ -171,8 +170,7 @@ endif()
 else(PNG_HARDWARE_OPTIMIZATIONS)
 
 # set definitions and sources for arm
-if(CMAKE_SYSTEM_PROCESSOR MATCHES "^arm" OR
-   CMAKE_SYSTEM_PROCESSOR MATCHES "^aarch64")
+if(CMAKE_OSX_ARCHITECTURES MATCHES "^arm64")
   add_definitions(-DPNG_ARM_NEON_OPT=0)
 endif()
 
@@ -183,8 +181,8 @@ if(CMAKE_SYSTEM_PROCESSOR MATCHES "^powerpc*" OR
 endif()
 
 # set definitions and sources for intel
-if(CMAKE_SYSTEM_PROCESSOR MATCHES "^i?86" OR
-   CMAKE_SYSTEM_PROCESSOR MATCHES "^x86_64*")
+if(CMAKE_OSX_ARCHITECTURES MATCHES "^i?86" OR
+   CMAKE_OSX_ARCHITECTURES MATCHES "^x86_64")
   add_definitions(-DPNG_INTEL_SSE_OPT=0)
 endif()
 
